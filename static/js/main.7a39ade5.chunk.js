(this["webpackJsonpfriday-project"]=this["webpackJsonpfriday-project"]||[]).push([[0],{13:function(e,t,r){e.exports={h1:"registration_h1__2_IDP",form:"registration_form__2E4YO",form_item:"registration_form_item__8LaB7",button:"registration_button__3Fg4i",error:"registration_error__2FeDq",loading:"registration_loading__140-l"}},29:function(e,t,r){e.exports={main:"LostPassword_main__3JiQG",error:"LostPassword_error__1KQfn",message:"LostPassword_message__3pxXu"}},30:function(e,t,r){e.exports={main:"NewPassword_main__uOk6G",inputs:"NewPassword_inputs__2efoD"}},48:function(e,t,r){e.exports={nav:"Nav_nav__h0oaZ"}},54:function(e,t,r){},55:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t);var n,a=r(0),s=r.n(a),o=r(24),c=r.n(o),i=(r(54),r(5)),u=(r(55),r(28)),l=r(4),d=r(3),j=r(47),b=r.n(j).a.create({baseURL:"https://neko-back.herokuapp.com/2.0"}),p=function(e,t,r){return b.post("auth/login",{password:e,email:t,rememberMe:r})},h=function(){return b.post("auth/me",{})},O=function(){return b.delete("auth/me",{})},m=function(e,t){return b.post("/auth/register",{email:e,password:t})},f=function(e,t){return b.post("auth/set-new-password",{password:e,resetPasswordToken:t}).then((function(e){return e.data}))},g=function(e){return b.post("auth/forgot",{email:e,from:"cards-admin <valdismin@gmail.com>",message:"<div style=\"background-color: lime; padding: 15px\"> password recovery link: <a href='https://Valdismin.github.io/cards/#/new-pass/$token$'>link</a></div>"}).then((function(e){return e.data}))},v={},x=function(e){return{type:"IS-FETCHING",payload:{isFetching:e}}},w={},y=function(e,t,r){return{type:"SUCCESS-LOGIN",payload:{data:Object(d.a)({},e),isAuth:t,errorMessage:r}}},N=function(e,t){return{type:"FAILED-LOGIN",payload:{errorMessage:e,isAuth:t}}},R=r(1),_=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.login})),r=t.isAuth,n=t.errorMessage,a=Object(l.c)((function(e){return e.app.isFetching})),s=Object(u.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var r,n,a;e((r=t.password,n=t.email,a=t.rememberMe,function(e){e(x(!0)),p(r,n,a).then((function(t){e(y(t.data,!0,"")),e(x(!1))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(N(r,!1)),e(x(!1))}))}))}});return console.log(n),r?Object(R.jsx)(i.a,{to:"/profile"}):Object(R.jsxs)("div",{children:["Login",a&&Object(R.jsx)("div",{children:"Loading..."}),n&&Object(R.jsx)("div",{style:{color:"red"},children:n}),Object(R.jsxs)("form",{onSubmit:s.handleSubmit,children:[Object(R.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(R.jsx)("input",{id:"email",name:"email",type:"email",onChange:s.handleChange,value:s.values.email}),Object(R.jsx)("label",{htmlFor:"password",children:"Password"}),Object(R.jsx)("input",{type:"text",name:"password",id:"password",value:s.values.password,onChange:s.handleChange}),Object(R.jsx)("label",{htmlFor:"rememberMe",children:"Remember me"}),Object(R.jsx)("input",{type:"checkbox",name:"rememberMe",value:"rememberMe",onChange:s.handleChange}),Object(R.jsx)("button",{type:"submit",disabled:a,children:"Submit"})]})]})},E=function(){return Object(R.jsx)("div",{children:"Error404"})},C=function(){return Object(R.jsx)("div",{children:"ShowAllComponents"})},S=r(7),P=r(48),A=r.n(P),L=function(){return Object(R.jsxs)("nav",{className:A.a.nav,children:[Object(R.jsx)(S.b,{to:"/login",children:"Login "}),Object(R.jsx)(S.b,{to:"/registration",children:"Registration"}),Object(R.jsx)(S.b,{to:"/profile",children:"Profile"}),Object(R.jsx)(S.b,{to:"/404",children:"Error404"}),Object(R.jsx)(S.b,{to:"/password-recovery",children:"Password recovery"}),Object(R.jsx)(S.b,{to:"/enter-new-password",children:"New password"}),Object(R.jsx)(S.b,{to:"/show-all",children:"Show all"})]})},I=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.login.isAuth}));Object(l.c)((function(e){return e.app.isFetching}));return t?Object(R.jsxs)("div",{children:["Profile",Object(R.jsx)("button",{onClick:function(){e((function(e){e(x(!0)),O().then((function(t){e({type:"SUCCESS-LOGOUT",payload:{isAuth:!1}}),e(x(!1))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(N(r,!1)),e(x(!1))}))}))},children:"logout"})]}):Object(R.jsx)(i.a,{to:"/login"})},k=r(13),F=r.n(k),T=r(19),D=r.n(T),G=r(22);!function(e){e.REDIRECT="Registration/REDIRECT",e.LOADING="Registration/LOADING",e.ERROR="Registration/ERROR"}(n||(n={}));var M={isRedirecting:!1,isLoading:!1,error:null},U=function(e){return{type:n.REDIRECT,payload:{redirect:e}}},H=function(e){return{type:n.ERROR,payload:{error:e}}},Z=function(e){return{type:n.LOADING,payload:{loading:e}}},q=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.registration.error})),r=Object(l.c)((function(e){return e.registration.isRedirecting})),n=Object(l.c)((function(e){return e.registration.isLoading})),a=Object(u.a)({initialValues:{email:"",password:"",confirmPassword:""},onSubmit:function(t){var r,n;e((r=t.email,n=t.password,function(){var e=Object(G.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Z(!0)),e.prev=1,e.next=4,m(r,n);case 4:t(Z(!1)),t(U(!0)),t(U(!1)),t(H(null)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),a=e.t0.response,t(H(a.data.error)),t(Z(!1));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<=7&&(t.password="Password should be more 7 symbols"):t.password="Required",e.password!==e.confirmPassword&&""!==e.confirmPassword&&(t.password="Passwords do not match"),t}});return r?Object(R.jsx)(i.a,{to:"login"}):Object(R.jsxs)("div",{className:F.a.registration,children:[Object(R.jsx)("h1",{className:F.a.h1,children:"\u0424\u043e\u0440\u043c\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(R.jsxs)("form",{className:F.a.form,onSubmit:a.handleSubmit,children:[Object(R.jsxs)("div",{className:F.a.form_item,children:[Object(R.jsx)("input",Object(d.a)({type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?Object(R.jsx)("div",{className:F.a.error,children:a.errors.email}):null]}),Object(R.jsxs)("div",{className:F.a.form_item,children:[Object(R.jsx)("input",Object(d.a)({type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?Object(R.jsx)("div",{className:F.a.error,children:a.errors.password}):null]}),Object(R.jsxs)("div",{className:F.a.form_item,children:[Object(R.jsx)("input",Object(d.a)({type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"},a.getFieldProps("confirmPassword"))),a.touched.confirmPassword&&a.errors.confirmPassword?Object(R.jsx)("div",{className:F.a.error,children:a.errors.confirmPassword}):null]}),Object(R.jsx)("button",{className:F.a.button,type:"submit",disabled:n,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),t&&!n&&Object(R.jsx)("div",{className:F.a.error,children:t}),n&&Object(R.jsx)("div",{className:F.a.loading,children:"LOADING..."})]})},B=r(21),J=r(29),V=r.n(J),$={error:null,redirect:!1},Q=function(e){return{type:"SET-ERROR",responseError:e}},K=function(e){return{type:"CHANGE-REDIRECT",redirectStatus:e}},W=function(){var e=Object(l.c)((function(e){return e.enterNewPassword.error})),t=Object(a.useState)(""),r=Object(B.a)(t,2),n=r[0],s=r[1],o=Object(l.c)((function(e){return e.enterNewPassword.redirect})),c=Object(l.b)();return Object(R.jsx)("div",{children:o?Object(R.jsxs)("h3",{className:V.a.message,children:["We have sent you a message with a link to change your password to this address:",n]}):Object(R.jsxs)("div",{className:V.a.main,children:[Object(R.jsx)("h1",{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email \u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(R.jsx)("h3",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 email \u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442"}),Object(R.jsx)("input",{onChange:function(e){s(e.currentTarget.value),c(Q(null))},placeholder:"Enter Email"}),e?Object(R.jsx)("div",{className:V.a.error,children:e}):null,Object(R.jsx)("button",{onClick:function(){return c(function(e){return function(){var t=Object(G.a)(D.a.mark((function t(r){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(e);case 3:r(K(!0)),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),n=t.t0.response?t.t0.response.data.error:t.t0.message+", more details in the console",r(Q(n));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(n))},children:"Next"})]})})},X=r(30),Y=r.n(X),z=function(){var e=Object(a.useState)(""),t=Object(B.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(""),o=Object(B.a)(s,2),c=o[0],u=o[1],d=Object(i.f)().token,j=Object(l.b)(),b=Object(l.c)((function(e){return e.enterNewPassword.redirect})),p=Object(a.useState)(!1),h=Object(B.a)(p,2),O=h[0],m=h[1],g=Object(l.c)((function(e){return e.enterNewPassword.error}));return b?Object(R.jsx)(i.a,{to:"/login"}):Object(R.jsxs)("div",{className:Y.a.main,children:[Object(R.jsx)("h1",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(R.jsxs)("div",{className:Y.a.inputs,children:[Object(R.jsx)("input",{onChange:function(e){n(e.currentTarget.value)},type:"password",placeholder:"Enter new password"}),Object(R.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},type:"password",placeholder:"Repeat new password"}),O?Object(R.jsx)("div",{children:"Passwords mismatch!"}):null,g?Object(R.jsx)("div",{className:Y.a.error,children:g}):null]}),Object(R.jsx)("button",{onClick:function(){return r===c?j((e=c,t=d,function(){var r=Object(G.a)(D.a.mark((function r(n){var a;return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f(e,t);case 3:n(K(!0)),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),a=r.t0.response?r.t0.response.data.error:r.t0.message+", more details in the console",n(Q(a));case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}())):m(!0);var e,t},children:"Next"})]})};var ee=function(){Object(a.useEffect)((function(){t((function(e){h().then((function(t){e(y(t.data,!0,""))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(N(r,!1))}))}))}),[]);var e=Object(l.c)((function(e){return e.login.isAuth})),t=Object(l.b)();return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(L,{}),!e&&Object(R.jsx)(i.a,{to:"/login"}),Object(R.jsx)(i.b,{path:"/login",render:function(){return Object(R.jsx)(_,{})}}),Object(R.jsx)(i.b,{path:"/registration",render:function(){return Object(R.jsx)(q,{})}}),Object(R.jsx)(i.b,{path:"/404",render:function(){return Object(R.jsx)(E,{})}}),Object(R.jsx)(i.b,{path:"/profile",render:function(){return Object(R.jsx)(I,{})}}),Object(R.jsx)(i.b,{path:"/password-recovery",render:function(){return Object(R.jsx)(W,{})}}),Object(R.jsx)(i.b,{path:"/enter-new-password",render:function(){return Object(R.jsx)(z,{})}}),Object(R.jsx)(i.b,{path:"/show-all",render:function(){return Object(R.jsx)(C,{})}})]})},te=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,81)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),s(e),o(e)}))},re=r(17),ne=r(49),ae={},se={},oe={},ce=Object(re.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS-LOGIN":return Object(d.a)(Object(d.a)({},e),{},{isAuth:t.payload.isAuth,data:t.payload.data,errorMessage:""});case"FAILED-LOGIN":return Object(d.a)(Object(d.a)({},e),{},{isAuth:t.payload.isAuth,errorMessage:t.payload.errorMessage});case"SUCCESS-LOGOUT":return Object(d.a)(Object(d.a)({},e),{},{isAuth:t.payload.isAuth});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.REDIRECT:return Object(d.a)(Object(d.a)({},e),{},{isRedirecting:t.payload.redirect});case n.ERROR:return Object(d.a)(Object(d.a)({},e),{},{error:t.payload.error});case n.LOADING:return Object(d.a)(Object(d.a)({},e),{},{isLoading:t.payload.loading});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;return t.type,e},showAllComponents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;return t.type,e},passwordRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;return t.type,e},enterNewPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.responseError});case"CHANGE-REDIRECT":return Object(d.a)(Object(d.a)({},e),{},{redirect:t.redirectStatus});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS-FETCHING":return Object(d.a)(Object(d.a)({},e),{},{isFetching:t.payload.isFetching});default:return e}}}),ie=Object(re.d)(ce,Object(re.a)(ne.a));c.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(S.a,{children:Object(R.jsx)(l.a,{store:ie,children:Object(R.jsx)(ee,{})})})}),document.getElementById("root")),te()}},[[80,1,2]]]);
//# sourceMappingURL=main.7a39ade5.chunk.js.map